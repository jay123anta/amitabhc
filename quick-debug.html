<!DOCTYPE html>
<html>
<head>
    <title>Test SHABD Functions After Fix</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #fff; }
        #output { background: #000; padding: 15px; border-radius: 5px; margin: 20px 0; }
        button { background: #ff9933; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        .success { color: #4ade80; }
        .error { color: #ef4444; }
    </style>
</head>
<body>
    <h2>üéØ Test SHABD Functions After Fix</h2>
    <p>This tests your main interpreter.js with the fix applied.</p>
    <button onclick="testSHABD()">Test SHABD Functions</button>
    <div id="output"></div>

    <!-- Load your FIXED interpreter.js -->
    <script src="interpreter.js"></script>

    <script>
        function addOutput(message) {
            document.getElementById('output').innerHTML += message + '<br>';
        }

        function testSHABD() {
            document.getElementById('output').innerHTML = '';
            
            if (typeof SecureAmitabhCInterpreter === 'undefined') {
                addOutput('<span class="error">‚ùå SecureAmitabhCInterpreter not found! Make sure interpreter.js is loaded.</span>');
                return;
            }

            addOutput('<h3>üéØ Testing SHABD Functions with Fixed Interpreter</h3>');

            const interpreter = new SecureAmitabhCInterpreter();
            interpreter.setOutputCallback((msg) => addOutput(`<span class="success">OUTPUT: ${msg}</span>`));

            const testCode = `LIGHTS
CAMERA
    BOLO "=== SHABD Function Tests ==="
    
    // Test 1: String length
    BOLO "Length of 'Hello': " + SHABD.length("Hello")
    
    // Test 2: Uppercase conversion
    BOLO "Uppercase 'hello world': " + SHABD.uppercase("hello world")
    
    // Test 3: Lowercase conversion  
    BOLO "Lowercase 'HELLO WORLD': " + SHABD.lowercase("HELLO WORLD")
    
    // Test 4: Contains check (true)
    BOLO "Does 'Hello World' contain 'World'? " + SHABD.contains("Hello World", "World")
    
    // Test 5: Contains check (false)
    BOLO "Does 'Hello World' contain 'xyz'? " + SHABD.contains("Hello World", "xyz")
    
    // Test 6: With variables
    VIJAY message = "AmitabhC Programming"
    BOLO "Length of message: " + SHABD.length(message)
    BOLO "Uppercase message: " + SHABD.uppercase(message)
    
    BOLO "=== All SHABD tests completed ==="
ACTION`;

            addOutput('Running comprehensive SHABD test...');
            
            interpreter.run(testCode).then(result => {
                if (result.success) {
                    addOutput('<span class="success">‚úÖ All SHABD functions working correctly!</span>');
                    addOutput(`<span class="success">Execution time: ${result.executionTime}ms</span>`);
                } else {
                    addOutput(`<span class="error">‚ùå Test failed: ${result.error}</span>`);
                }
            }).catch(error => {
                addOutput(`<span class="error">‚ùå Test crashed: ${error.message}</span>`);
            });
        }
    </script>
</body>
</html>