<!DOCTYPE html>
<html>
<head>
    <title>Final SHABD Functions Test</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #fff; }
        #output { background: #000; padding: 15px; border-radius: 5px; margin: 20px 0; }
        button { background: #ff9933; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        .success { color: #4ade80; }
        .error { color: #ef4444; }
        .output { color: #00ffff; }
        .celebrate { color: #ff9933; font-weight: bold; font-size: 1.2em; }
    </style>
</head>
<body>
    <h2>üéâ Final SHABD Functions Test</h2>
    <p>Testing all SHABD functions with proper string concatenation!</p>
    <button onclick="testAllSHABD()">üöÄ Test All SHABD Functions</button>
    <button onclick="testInEditor()">üìù Test in Pro Editor Style</button>
    <button onclick="clearOutput()">üßπ Clear</button>
    
    <div id="output"></div>

    <script src="interpreter.js"></script>

    <script>
        function addOutput(message, type = 'info') {
            const output = document.getElementById('output');
            const div = document.createElement('div');
            div.className = type;
            div.innerHTML = message;
            output.appendChild(div);
        }

        function clearOutput() {
            document.getElementById('output').innerHTML = '';
        }

        function testAllSHABD() {
            clearOutput();
            
            if (typeof SecureAmitabhCInterpreter === 'undefined') {
                addOutput('‚ùå SecureAmitabhCInterpreter not found!', 'error');
                return;
            }

            addOutput('<h3>üé¨ AmitabhC SHABD Functions - Complete Test</h3>');

            const interpreter = new SecureAmitabhCInterpreter();
            interpreter.setOutputCallback((msg) => addOutput(msg, 'output'));

            const testCode = `LIGHTS
CAMERA
    DEVIYON_AUR_SAJJANO
    BOLO "Welcome to SHABD Functions Showcase!"
    BOLO "=================================="
    
    // Test 1: String Length
    BOLO "üìè String Length Tests:"
    BOLO "Length of 'Hello': " + SHABD.length("Hello")
    BOLO "Length of 'Amitabh Bachchan': " + SHABD.length("Amitabh Bachchan")
    BOLO "Length of empty string: " + SHABD.length("")
    BOLO ""
    
    // Test 2: Case Conversion
    BOLO "üî§ Case Conversion Tests:"
    BOLO "Uppercase 'hello world': " + SHABD.uppercase("hello world")
    BOLO "Lowercase 'BOLLYWOOD': " + SHABD.lowercase("BOLLYWOOD")
    BOLO "Uppercase 'amitabhc': " + SHABD.uppercase("amitabhc")
    BOLO ""
    
    // Test 3: String Contains
    BOLO "üîç String Contains Tests:"
    BOLO "Does 'Hello World' contain 'World'? " + SHABD.contains("Hello World", "World")
    BOLO "Does 'Hello World' contain 'xyz'? " + SHABD.contains("Hello World", "xyz")
    BOLO "Does 'AmitabhC' contain 'C'? " + SHABD.contains("AmitabhC", "C")
    BOLO ""
    
    // Test 4: With Variables
    BOLO "üé≠ Tests with Variables:"
    VIJAY movie = "Sholay"
    VIJAY dialogue = "Kitne aadmi the?"
    
    BOLO "Movie: " + movie
    BOLO "Movie length: " + SHABD.length(movie)
    BOLO "Movie uppercase: " + SHABD.uppercase(movie)
    BOLO ""
    
    BOLO "Dialogue: " + dialogue
    BOLO "Dialogue length: " + SHABD.length(dialogue)
    BOLO "Contains 'aadmi'? " + SHABD.contains(dialogue, "aadmi")
    BOLO ""
    
    // Test 5: Complex Expressions
    BOLO "üé™ Complex Expression Tests:"
    BOLO "Combined: '" + SHABD.uppercase("hello") + "' has " + SHABD.length("hello") + " chars"
    BOLO "Nested: " + SHABD.contains(SHABD.uppercase("hello world"), "WORLD")
    BOLO ""
    
    BOLO "üéâ All SHABD functions working perfectly!"
    COMPUTER_JI_LOCK_KIYA_JAYE
ACTION`;

            addOutput('üöÄ Running comprehensive SHABD test...');
            
            interpreter.run(testCode).then(result => {
                addOutput('<h3>üìä Test Results:</h3>');
                if (result.success) {
                    addOutput('‚úÖ SUCCESS: All SHABD functions work perfectly!', 'celebrate');
                    addOutput(`‚è±Ô∏è Execution time: ${result.executionTime}ms`, 'success');
                    addOutput(`üß† Memory usage: ${result.memoryUsage.variables} vars, ${result.memoryUsage.functions} functions`, 'success');
                    addOutput('', '');
                    addOutput('üé¨ "Rishtey mein toh hum tumhare SHABD functions lagte hain!" üé¨', 'celebrate');
                } else {
                    addOutput(`‚ùå FAILED: ${result.error}`, 'error');
                }
            }).catch(error => {
                addOutput(`‚ùå Test crashed: ${error.message}`, 'error');
            });
        }

        function testInEditor() {
            clearOutput();
            
            addOutput('<h3>üìù Pro Editor Style Test</h3>');
            addOutput('This is the kind of code you can now run in your main editor:');
            addOutput('');

            const editorStyleCode = `LIGHTS
CAMERA
    // üé¨ Professional SHABD Programming
    VIJAY userInput = "AmitabhC Programming Language"
    
    BOLO "User Input Analysis:"
    BOLO "Text: " + userInput
    BOLO "Length: " + SHABD.length(userInput) + " characters"
    BOLO "Uppercase: " + SHABD.uppercase(userInput)
    BOLO "Lowercase: " + SHABD.lowercase(userInput)
    
    AGAR SHABD.contains(userInput, "Programming") == "SHAKTI"
        BOLO "‚úÖ Contains 'Programming' - This is a programming text!"
        COMPUTER_JI_LOCK_KIYA_JAYE
    NAHI TOH
        BOLO "‚ùå Not programming related"
    BAS
    
    // Advanced usage
    VIJAY shortText = "Hi"
    VIJAY longText = "This is a very long sentence for testing"
    
    AGAR SHABD.length(shortText) < SHABD.length(longText)
        BOLO "Short text (" + SHABD.length(shortText) + ") < Long text (" + SHABD.length(longText) + ")"
    BAS
ACTION`;

            const interpreter = new SecureAmitabhCInterpreter();
            interpreter.setOutputCallback((msg) => addOutput(msg, 'output'));

            addOutput('üöÄ Running editor-style test...');
            
            interpreter.run(editorStyleCode).then(result => {
                if (result.success) {
                    addOutput('', '');
                    addOutput('üéØ Perfect! You can now use SHABD functions in your main editor!', 'celebrate');
                    addOutput('Copy the code above and try it in editor.html or pro.html', 'success');
                } else {
                    addOutput(`‚ùå Test failed: ${result.error}`, 'error');
                }
            });
        }
    </script>
</body>
</html>