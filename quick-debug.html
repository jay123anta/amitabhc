<!DOCTYPE html>
<html>
<head>
    <title>Quick Fix Test</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #fff; }
        #output { background: #000; padding: 15px; border-radius: 5px; margin: 20px 0; }
        button { background: #ff9933; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        .success { color: #4ade80; }
        .error { color: #ef4444; }
        .critical { color: #ff3333; font-weight: bold; }
    </style>
</head>
<body>
    <h2>‚ö° Quick Fix Test</h2>
    <p>This will test if the sanitizeOperand fix has been applied correctly.</p>
    <button onclick="quickTest()">Test Current Fix Status</button>
    <div id="output"></div>

    <script src="interpreter.js"></script>

    <script>
        function addOutput(message, type = 'info') {
            const output = document.getElementById('output');
            const div = document.createElement('div');
            div.className = type;
            div.innerHTML = message;
            output.appendChild(div);
        }

        function quickTest() {
            document.getElementById('output').innerHTML = '';
            
            if (typeof SecureAmitabhCInterpreter === 'undefined') {
                addOutput('‚ùå SecureAmitabhCInterpreter not found!', 'error');
                return;
            }

            const interpreter = new SecureAmitabhCInterpreter();

            addOutput('<h3>üîß Testing sanitizeOperand Fix Status</h3>');

            // Test 1: Number should stay as number
            try {
                const result = interpreter.sanitizeOperand(4);
                addOutput(`Test 1 - sanitizeOperand(4): ${JSON.stringify(result)} (type: ${typeof result})`);
                
                if (typeof result === 'number' && result === 4) {
                    addOutput('‚úÖ GOOD: sanitizeOperand preserves numbers correctly', 'success');
                } else {
                    addOutput('‚ùå BAD: sanitizeOperand is still converting numbers incorrectly', 'critical');
                    addOutput('üëâ You need to apply the sanitizeOperand fix!', 'critical');
                }
            } catch (error) {
                addOutput(`‚ùå sanitizeOperand test failed: ${error.message}`, 'error');
            }

            // Test 2: String should stay as string  
            try {
                const result = interpreter.sanitizeOperand("hello");
                addOutput(`Test 2 - sanitizeOperand("hello"): ${JSON.stringify(result)} (type: ${typeof result})`);
                
                if (typeof result === 'string' && result === "hello") {
                    addOutput('‚úÖ GOOD: sanitizeOperand preserves strings correctly', 'success');
                } else {
                    addOutput('‚ùå BAD: sanitizeOperand is modifying strings incorrectly', 'critical');
                }
            } catch (error) {
                addOutput(`‚ùå sanitizeOperand string test failed: ${error.message}`, 'error');
            }

            // Test 3: Direct concatenation test
            addOutput('<h3>üîß Testing String Concatenation</h3>');
            
            try {
                const result = interpreter.applyOperation("Result: ", 4, "+");
                addOutput(`Test 3 - "Result: " + 4: ${JSON.stringify(result)} (type: ${typeof result})`);
                
                if (result === "Result: 4") {
                    addOutput('‚úÖ PERFECT: String concatenation works correctly!', 'success');
                    addOutput('üéâ Your fix is working! SHABD functions should work now.', 'success');
                } else {
                    addOutput('‚ùå BAD: String concatenation still broken', 'critical');
                    addOutput(`Expected: "Result: 4", Got: ${JSON.stringify(result)}`, 'critical');
                }
            } catch (error) {
                addOutput(`‚ùå Concatenation test failed: ${error.message}`, 'error');
            }

            addOutput('<h3>üìã Summary</h3>');
            addOutput('If you see any BAD results above, you need to apply the sanitizeOperand fix from the previous message.');
        }
    </script>
</body>
</html>